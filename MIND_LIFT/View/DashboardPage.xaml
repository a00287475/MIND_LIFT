<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:MIND_LIFT.ViewModel"
             x:Class="MIND_LIFT.View.DashboardPage"
             x:DataType="vm:DashboardViewModel"
             Title="Dashboard">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">

            <Label Text="Welcome back!" FontSize="24" FontAttributes="Bold"/>

            <Label Text="{Binding DailyAffirmation.Message}" FontSize="18" TextColor="DarkGreen"/>

            <Button Text="Log Mood" Command="{Binding GotoMoodTrackerCommand}" />
            <Button Text="Start Meditation" Command="{Binding NavigateToMeditationCommand}" />
            <Button Text="View Journal" Command="{Binding NavigateToJournalCommand}" />

            <!-- Mood Entries List -->
            <Label Text="Your Mood History:" FontSize="18" FontAttributes="Bold"/>

            <CollectionView ItemsSource="{Binding MoodEntries}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Padding="10" Margin="5" BackgroundColor="#f0f0f0">
                            <VerticalStackLayout>
                                <Label Text="{Binding Date, StringFormat='Date: {0:MMM dd, yyyy}'}"/>
                                <Label Text="{Binding MoodScore, StringFormat='Mood: {0}/10'}"/>
                                <Label Text="{Binding Emotions, Converter={StaticResource ListToStringConverter}}"/>
                                <Label Text="{Binding Notes}" 
                                       IsVisible="{Binding Notes, Converter={StaticResource StringIsNotNullOrEmptyConverter}}"/>
                            </VerticalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
